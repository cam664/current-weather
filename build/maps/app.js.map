{"version":3,"sources":["app.js"],"names":["$","document","ready","data","getLoc","get","response","getWeather","city","view","render","descCapitalize","weather","description","substring","toUpperCase","$temp","html","Math","round","main","temp","$low","temp_min","$high","temp_max","$desc","$wind","wind","speed","$humid","humidity","$city","name","sys","country","Date","now","toString","slice","sunrise","sunset","$icon","removeClass","addClass","id","find","search","bindEvents","$newCityForm","on","form","value","window","e","keyCode","$newCityBtn","querySelector"],"mappings":"AAAAA,EAAEC,UAAUC,MAAM,WACdC,KAAKC,UAGT,IAAID,MAAO,WAEP,QAASC,KACLJ,EAAEK,IAAI,yBAA0B,SAAUC,GACtCH,KAAKI,WAAWD,EAASE,QAIjC,QAASD,GAAWC,GAChBR,EAAEK,IAAI,oDAAoDG,EAAK,uDAAwD,SAASF,GAC5HG,KAAKC,OAAOJ,KAIpB,OACIF,OAAQA,EACRG,WAAYA,MAIhBE,KAAO,WAWP,QAASC,GAAOP,GACZ,GAAIQ,GAAiBR,EAAKS,QAAQ,GAAGC,YAAYC,UAAU,EAAE,GAAGC,aAEhEC,GAAMC,KAAKC,KAAKC,MAAMhB,EAAKiB,KAAKC,OAChCC,EAAKL,KAAKC,KAAKC,MAAMhB,EAAKiB,KAAKG,WAC/BC,EAAMP,KAAKC,KAAKC,MAAMhB,EAAKiB,KAAKK,WAChCC,EAAMT,KAAKN,EAAiBR,EAAKS,QAAQ,GAAGC,YAAYC,UAAU,IAClEa,EAAMV,KAAKd,EAAKyB,KAAKC,OACrBC,EAAOb,KAAKd,EAAKiB,KAAKW,UACtBC,EAAMf,KAAKd,EAAK8B,KAAM,KAAM9B,EAAK+B,IAAIC,SAClCC,KAAKC,MAAMC,WAAWC,MAAM,EAAE,IAAMpC,EAAK+B,IAAIM,SAAWJ,KAAKC,MAAMC,WAAWC,MAAM,EAAE,IAAMpC,EAAK+B,IAAIO,OACpGC,EAAMC,cAAcC,SAAS,iBAAiBzC,EAAKS,QAAQ,GAAGiC,IAE9DH,EAAMC,cAAcC,SAAS,mBAAmBzC,EAAKS,QAAQ,GAAGiC,IAtBxE,GAAI7B,GAAQhB,EAAE,cACVwB,EAAQxB,EAAE,cACVsB,EAAOtB,EAAE,aACT0B,EAAQ1B,EAAE,SACV2B,EAAQ3B,EAAE,cACV8B,EAAS9B,EAAE,eACXgC,EAAQhC,EAAE,cACV0C,EAAQ1C,EAAE,SAAS8C,KAAK,IAmB5B,QACIpC,OAAQA,MAIZqC,OAAS,WAST,QAASC,KACLC,EAAaC,GAAG,QAAS,WACtBC,EAAKC,MAAQ,KAGhBpD,EAAEqD,QAAQH,GAAG,QAAS,SAAUI,GAC5B,GAAI9C,GAAO2C,EAAKC,KAEA,KAAbE,EAAEC,SACDpD,KAAKI,WAAWC,KAIxBgD,EAAYN,GAAG,QAAS,SAAUI,GAC9B,GAAI9C,GAAO2C,EAAKC,KAEhBjD,MAAKI,WAAWC,KAvBxB,GAAIyC,GAAejD,EAAE,kBACjBwD,EAAcxD,EAAE,gBAEpBgD,IAEA,IAAIG,GAAOlD,SAASwD,cAAc","file":"../js/app.js","sourcesContent":["$(document).ready(function () {\r\n    data.getLoc();\r\n});\r\n\r\nvar data = (function () {\r\n    //lookup users location, always calls getWeather() and passes it the city location\r\n    function getLoc() {\r\n        $.get('http://ip-api.com/json', function (response) {\r\n            data.getWeather(response.city);\r\n        })\r\n    };    \r\n    //getWeather() can be called in isolation to take a user input search parameter\r\n    function getWeather(city) {\r\n        $.get('http://api.openweathermap.org/data/2.5/weather?q='+city+'&appid=748aad33699f1e4210b6c4b402de9e70&units=metric', function(response) {\r\n            view.render(response);\r\n        });\r\n    };\r\n    \r\n    return {\r\n        getLoc: getLoc,\r\n        getWeather: getWeather\r\n    }\r\n})();\r\n\r\nvar view = (function(){\r\n    //all our lovely spans for the UI \r\n    var $temp = $('#temp-data');\r\n    var $high = $('#high-data');\r\n    var $low = $('#low-data');\r\n    var $desc = $('#desc');\r\n    var $wind = $('#wind-data');\r\n    var $humid = $('#humid-data');\r\n    var $city = $('#city-data');\r\n    var $icon = $('#icon').find('i'); \r\n\r\n    function render(data) {\r\n        var descCapitalize = data.weather[0].description.substring(0,1).toUpperCase();//openweathermap doesn't capitalize the first letter of it's description annoyingly\r\n        \r\n        $temp.html(Math.round(data.main.temp));//round because decimals are ugly\r\n        $low.html(Math.round(data.main.temp_min));\r\n        $high.html(Math.round(data.main.temp_max));\r\n        $desc.html(descCapitalize + data.weather[0].description.substring(1));\r\n        $wind.html(data.wind.speed);\r\n        $humid.html(data.main.humidity);\r\n        $city.html(data.name +', '+ data.sys.country);\r\n        if(Date.now().toString().slice(0,10) > data.sys.sunrise && Date.now().toString().slice(0,10) < data.sys.sunset) {//for 'moon' and 'sun' icons respectively. Use only first 9 numbers of Date.now() because API only uses 9 numbers.\r\n            $icon.removeClass().addClass('wi wi-owm-day-'+data.weather[0].id+'');\r\n        } else {\r\n            $icon.removeClass().addClass('wi wi-owm-night-'+data.weather[0].id+'');\r\n        }    \r\n    };\r\n    \r\n    return {\r\n        render: render\r\n    }\r\n})();\r\n\r\nvar search = (function(){\r\n    \r\n    var $newCityForm = $('#new-city-form');\r\n    var $newCityBtn = $('#new-city-btn');\r\n    \r\n    bindEvents();\r\n\r\n    var form = document.querySelector('#new-city-form');//not using jquery in order to use .value\r\n\r\n    function bindEvents() { \r\n        $newCityForm.on('focus', function () {\r\n           form.value = ''; \r\n        });\r\n\r\n        $(window).on('keyup', function (e) {\r\n            var city = form.value;\r\n\r\n            if(e.keyCode == 13) {//if it's enter, query open weather map with the input city name\r\n                data.getWeather(city);\r\n            }\r\n        });\r\n        \r\n        $newCityBtn.on('click', function (e) {\r\n            var city = form.value;\r\n\r\n            data.getWeather(city);\r\n        });\r\n    }\r\n})();\r\n"]}